---
import Layout from "../layouts/Layout.astro";
import DessertCard from "../components/DessertCard.astro";
import SectionTitle from "../components/SectionTitle.astro";
import goods from "../data/goods.json";
import categories from "../data/categories.json";

// Получаем список уникальных категорий
// const categorias = [...new Set(goods.map(d => d.category))];
---

<Layout title="Todos los postres - Privet">
  <section class="py-16 max-w-6xl mx-auto px-4">
    <SectionTitle title="Todos los postres" />

    {
      categories.map((categoria) => {
        let anchor = categoria.toLowerCase();
        return (
          <>
            <h3
              class="text-xl font-heading text-primary mt-12 mb-4"
              id={anchor}
            >
              {categoria}
            </h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
              {goods
                .filter((d) => d.category === categoria)
                .map((dessert) => (
                  <DessertCard {...dessert} />
                ))}
            </div>
          </>
        );
      })
    }
  </section>
</Layout>
